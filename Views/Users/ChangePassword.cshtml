@model LRTV.ViewModels.ChangePasswordViewModel
<script src="https://kit.fontawesome.com/687b81a34f.js" crossorigin="anonymous"></script>

@{
    ViewData["Title"] = "Change Password";
}

<h2>Change Password</h2>

<form asp-action="ChangePassword" method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <div class="input-group">
            <input asp-for="CurrentPassword" id="currentPassword" type="password" class="form-control bg-light" required />
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="toggleCurrentPassword">
                    <i id="toggleIconCurrent" class="fa fa-eye-slash"></i>
                </button>
            </div>
        </div>
        <span asp-validation-for="CurrentPassword" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label for="newPassword">New Password</label>
        <div class="input-group">
            <input asp-for="NewPassword" id="newPassword" type="password" class="form-control bg-light" required />
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="toggleNewPassword">
                    <i id="toggleIconNew" class="fa fa-eye-slash"></i>
                </button>
            </div>
        </div>
        <span asp-validation-for="NewPassword" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <div class="input-group">
            <input asp-for="ConfirmPassword" id="confirmPassword" type="password" class="form-control bg-light" required />
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
                    <i id="toggleIconConfirm" class="fa fa-eye-slash"></i>
                </button>
            </div>
        </div>
        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Change Password</button>
</form>

<p>
    <a asp-action="MyProfile">Back to Profile</a>
</p>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggleCurrentPassword = document.querySelector('#toggleCurrentPassword');
        const currentPassword = document.querySelector('#currentPassword');
        const toggleIconCurrent = document.querySelector('#toggleIconCurrent');

        toggleCurrentPassword.addEventListener('click', function (e) {
            const type = currentPassword.getAttribute('type') === 'password' ? 'text' : 'password';
            currentPassword.setAttribute('type', type);

            if (type === 'password') {
                toggleIconCurrent.classList.add('fa-eye-slash');
                toggleIconCurrent.classList.remove('fa-eye');
            } else {
                toggleIconCurrent.classList.remove('fa-eye-slash');
                toggleIconCurrent.classList.add('fa-eye');
            }
        });

        const toggleNewPassword = document.querySelector('#toggleNewPassword');
        const newPassword = document.querySelector('#newPassword');
        const toggleIconNew = document.querySelector('#toggleIconNew');

        toggleNewPassword.addEventListener('click', function (e) {
            const type = newPassword.getAttribute('type') === 'password' ? 'text' : 'password';
            newPassword.setAttribute('type', type);

            if (type === 'password') {
                toggleIconNew.classList.add('fa-eye-slash');
                toggleIconNew.classList.remove('fa-eye');
            } else {
                toggleIconNew.classList.remove('fa-eye-slash');
                toggleIconNew.classList.add('fa-eye');
            }
        });

        const toggleConfirmPassword = document.querySelector('#toggleConfirmPassword');
        const confirmPassword = document.querySelector('#confirmPassword');
        const toggleIconConfirm = document.querySelector('#toggleIconConfirm');

        toggleConfirmPassword.addEventListener('click', function (e) {
            const type = confirmPassword.getAttribute('type') === 'password' ? 'text' : 'password';
            confirmPassword.setAttribute('type', type);

            if (type === 'password') {
                toggleIconConfirm.classList.add('fa-eye-slash');
                toggleIconConfirm.classList.remove('fa-eye');
            } else {
                toggleIconConfirm.classList.remove('fa-eye-slash');
                toggleIconConfirm.classList.add('fa-eye');
            }
        });
    });
</script>
